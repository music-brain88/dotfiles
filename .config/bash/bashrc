#
# ~/.bashrc
# Minimal bootstrap to launch fish shell
#

# If not running interactively, don't do anything
[ -z "$PS1" ] && return

# Source Nix environment (required before launching Nix-managed fish)
if [ -e "$HOME/.nix-profile/etc/profile.d/nix.sh" ]; then
  . "$HOME/.nix-profile/etc/profile.d/nix.sh"
fi

# Set up environment variables that need to be inherited by fish
if [ "$(uname -s)" = 'Linux' ]; then
  # Start ssh-agent if not already running
  if [ -z "$SSH_AUTH_SOCK" ]; then
    eval "$(ssh-agent -s)"
  fi
  export GPG_TTY=$(tty)
fi

# Launch Nix-managed fish shell
exec fish
